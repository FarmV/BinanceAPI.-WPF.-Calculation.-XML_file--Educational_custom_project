<mah:MetroWindow 
        x:Class="AppPars.MainWindow"
        mc:Ignorable="d"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
               
        xmlns:system="clr-namespace:System;assembly=mscorlib"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"                
        xmlns:local="clr-namespace:AppPars"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks" 
        xmlns:converters="http://metro.mahapps.com/winfx/xaml/shared"
        Title="MainWindow" 
        Height="600" 
        Width="794"
        MinWidth="170"
                           
        WindowStartupLocation="CenterScreen"         
        WindowTransitionsEnabled ="True"
        ShowTitleBar="False"
        ShowInTaskbar="True"
        ShowDialogsOverTitleBar="False"
        ShowIconOnTitleBar="False"
        IsMaxRestoreButtonEnabled="True"
        ShowMinButton="True"        
        ResizeMode ="CanResizeWithGrip"   
        BorderThickness="1"      
        Topmost="False"
        IgnoreTaskbarOnMaximize="False"
        IsWindowDraggable="True"
    
    
        TitleBarHeight="30"
        TryToBeFlickerFree="True"
        WindowTitleBrush="Transparent"
        NonActiveBorderBrush="Transparent" 

        Style="{DynamicResource MahApps.Styles.MetroWindow.VisualStudio}"
        x:Name="MainWindowObject"
    
    
         StateChanged="MainWindowObject_StateChanged"   
        >



    <d:Window.DataContext>
        <local:MainWindowViewModel/>
    </d:Window.DataContext>


    <Window.Resources>

        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Themes/Dark.Steel.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <Color x:Key="BackColor" A="180" R="4" G="4" B="1"/>
            <SolidColorBrush x:Key="BackBrush">
                <SolidColorBrush.Color>
                    <Color A="180" R="4" G="4" B="1"/>
                </SolidColorBrush.Color>
            </SolidColorBrush>

            <Style x:Key="DataGridColumnHeaderStyle0000"
                   BasedOn="{mah:StaticResource MahApps.Styles.DataGridColumnHeader}"
                   TargetType="{x:Type DataGridColumnHeader}"
                   >

                <Setter Property="FontSize" Value="20"/>
                <Setter Property="mah:ControlsHelper.ContentCharacterCasing" Value="Normal"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Background" Value="Transparent"/>

            </Style>




            <local:ConverterStringValuse x:Key="NumberConvetorSpace"/>
            <local:InverseVisibilityConverter x:Key="InverseVisibilityConverter"/>
        </ResourceDictionary>

    </Window.Resources>






    <Grid
        Grid.IsSharedSizeScope="True"
        Panel.ZIndex="1" 
        Visibility="Visible"
        >

        <Grid.RowDefinitions>

            <RowDefinition 
                Height="30"
            />

            <RowDefinition/>

            <RowDefinition/>

            <RowDefinition 
                Height="30"
            />

        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>

            <ColumnDefinition
                x:Name="OneColumn"
                MinWidth="30"
                Width="auto"
                mah:VisibilityHelper.IsCollapsed="True"
                >

                <!--<ColumnDefinition.Style>

                    <Style 
                        TargetType="ColumnDefinition"
                        >
                        
                        <Style.Triggers>
                            
                            <DataTrigger 
                                Binding="{Binding ElementName=HamburgerMenu,Path=IsPaneOpen}" 
                                Value="true"
                                >

                                <Setter 
                                    Property="Width" 
                                    Value="{Binding ElementName=HamburgerMenu, Path=OpenPaneLength, Mode=TwoWay }">

                                </Setter>
                                
                            </DataTrigger>
                          
                        </Style.Triggers>

                        <Setter 
                            Property="Width" 
                            Value="auto">

                        </Setter>

                    </Style>
                </ColumnDefinition.Style>-->

            </ColumnDefinition>

            <ColumnDefinition
                Width="auto"
            />

            <ColumnDefinition
            />

            <ColumnDefinition 
                Width="30"
            />

        </Grid.ColumnDefinitions>

        <Canvas 
            x:Name="HeaderColumn" 
            Panel.ZIndex="1000" 
            Margin="0 0 0 0" 
            Grid.Column="2" 
            Background="Transparent" 
            
            
        />

        <Canvas 
            x:Name="BottomColumn"
            Panel.ZIndex="1000" 
            Grid.Column="2"
            Grid.Row="3" 
            Background="Transparent" 
        />

        <Viewbox
            
            x:Name="ViewboxBackgroundObject"
            Grid.Column="0" 
            Grid.Row="0" 
            Grid.RowSpan="4" 
            Grid.ColumnSpan="4"
            Stretch="UniformToFill"
            Opacity="0.25"
            d:Opacity="1"
            >

            <Viewbox.Style>

                <Style         
                    TargetType="Viewbox"
                    >
                    <Style.Triggers>

                        <DataTrigger  
                            Binding="{Binding ElementName=MainWindowObject, Path=WindowState}"
                            Value="{x:Static WindowState.Maximized}">


                            <!--<Setter Property="Viewbox.Opacity" Value="0.0"/> не работает?-->
                            <Setter Property="Cursor" Value="Help"/>
                        </DataTrigger>

                    </Style.Triggers>


                </Style>


            </Viewbox.Style>

            <Image               
                >



                <Image.Source>

                    <BitmapImage 
                        UriSource="Background.png" 
                    />

                </Image.Source>
            </Image>

        </Viewbox>



        <Button
           
            x:Name="TestB"
            Grid.Column="0"
            Grid.Row="0"
            BorderThickness="0"
            Foreground="WhiteSmoke"

            >

            <Button.Style>
                <Style 
                    BasedOn="{mah:StaticResource MahApps.Styles.Button.Hamburger}"
                    TargetType="Button">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ElementName=WorkPanelGrid, Path=Visibility}" 
                                     Value="{x:Static Visibility.Visible}" >
                            <Setter Property="Button.HorizontalAlignment" Value="{x:Static HorizontalAlignment.Left}"/>
                            <Setter Property="Height" Value="30"/>
                            <Setter Property="Width" Value="30" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>


            <iconPacks:PackIconVaadinIcons 
                
                Kind="Menu" />


            <Button.Triggers>







                <EventTrigger RoutedEvent="Button.MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <ColorAnimation 
                                Storyboard.TargetProperty="Background.Color"
                                
                                From="Transparent"
                                Duration="0:0:0.2"
                                >
                                <ColorAnimation.To>
                                    <Color A="200" R="96" G="84" B="175"/>
                                </ColorAnimation.To>

                            </ColorAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="Button.Click">

                    <BeginStoryboard>

                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames 
                                        Storyboard.TargetName="WorkPanelGrid"
                                        Storyboard.TargetProperty="Visibility"
                                
                                        >

                                <DiscreteObjectKeyFrame 
                                    KeyTime="0:0:0.0" 
                                    Value="{Binding ElementName = WorkPanelGrid, 
                                    Path = Visibility,
                                    Converter= {StaticResource InverseVisibilityConverter}}"
                                   
                                    
                                />


                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Button.Triggers>


        </Button>



        <Grid
           
            x:Name="WorkPanelGrid"
            Panel.ZIndex="4"
            Grid.Row="1"
            Grid.Column="0"
            Grid.RowSpan="3"
            HorizontalAlignment="Center"
            >

            <Grid.Style>

                <Style 
                    TargetType="Grid"
                    >



                </Style>

            </Grid.Style>

            <Grid
                
                TextBlock.FontSize="13"
                >

                <Grid.ColumnDefinitions>

                    <ColumnDefinition
                        Width="auto"
                        
                    />

                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                    <RowDefinition 
                        Height="auto"
                    />

                </Grid.RowDefinitions>

                <Grid
                    Grid.Row="0"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="auto"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock 
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Рабочий объём 1"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Объём 1"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                     Grid.Row="1"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="auto"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock 
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Рабочий объём 2"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Объём 2"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                     Grid.Row="2"                    
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="auto"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock 
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Рабочий объём 3"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Объём 3"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid  
                    Grid.Row="3"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="auto"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock 
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Рабочий объём 4"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Объём 4"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                    Grid.Row="4"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="auto"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock 
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Рабочий объём 5"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Объём 5"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                    Grid.Row="5"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>

                        <RowDefinition 
                            Height="*"                       
                        />

                    </Grid.RowDefinitions>



                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="0"
                        Foreground="White"
                        TextWrapping="Wrap"
                        Text="Дальность заброса лимитных заявок"
                        TextAlignment="Center"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Дальность"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                    Grid.Row="6"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>

                        <RowDefinition 
                            Height="*"                       
                        />

                    </Grid.RowDefinitions>



                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="0"
                        Foreground="White"
                        TextWrapping="Wrap"
                        Text="Дальность заброса от стоп-заявок"
                        TextAlignment="Center"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Дальность"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                    Grid.Row="7"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Stop-loss"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Stop-loss"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                    Grid.Row="8"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Take-Profit"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:NumericUpDown                       
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        
                        Minimum="0" 
                        mah:TextBoxHelper.AutoWatermark="True"
                        mah:TextBoxHelper.Watermark="Take-Profit"
                        mah:TextBoxHelper.IsMonitoring="True"
                        ButtonsAlignment="Opposite"
                        TextAlignment="Center"
                        
                        ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},
                        Converter={StaticResource NumberConvetorSpace},Path=Value,Mode=OneWay}"                                            
                        >

                    </mah:NumericUpDown>

                </Grid>

                <Grid
                    Grid.Row="9"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Срабатывание стоп-заявок"
                        TextWrapping="Wrap"
                        TextAlignment="Center"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <ComboBox                    
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        SelectedIndex="0"
                        >

                        <ComboBox.Items>

                            <ComboBoxItem 
                                Content="По сделкам"
                            />

                            <ComboBoxItem 
                                Content="Что-то там ещё?"
                            />

                        </ComboBox.Items>

                    </ComboBox>

                </Grid>

                <Grid
                    Grid.Row="10"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Размещение Stop-loss/Take-profit"
                        TextWrapping="Wrap"
                        TextAlignment="Center"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <ComboBox                    
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        SelectedIndex="0"
                        >

                        <ComboBox.Items>

                            <ComboBoxItem 
                                Content="На сервере"                           
                             />

                            <ComboBoxItem 
                                Content="Локально?"
                            />

                        </ComboBox.Items>

                    </ComboBox>

                </Grid>

                <Grid
                    Grid.Row="11"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Уведомление: совершена сделка"
                        TextWrapping="Wrap"
                        TextAlignment="Center"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <mah:ToggleSwitch
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Stretch"
                        Grid.Column="2"
                        Margin="25 -10 0 0"
                        
                        OffContent="{x:Null}"
                        OnContent="{x:Null}" Height="37"
                        >

                        <mah:ToggleSwitch.RenderTransform>
                            <ScaleTransform ScaleX="1.15" ScaleY="1.15"/>
                        </mah:ToggleSwitch.RenderTransform>

                    </mah:ToggleSwitch>



                </Grid>

                <Grid
                    Grid.Row="12"
                    >

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Отображение прибыли"
                        TextWrapping="Wrap"
                        TextAlignment="Center"
                    />

                    <Button
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo 
                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <ComboBox                    
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Center"
                        Grid.Column="3"
                        MinWidth="114"
                        MaxWidth="114"
                        SelectedIndex="0"
                        >

                        <ComboBox.Items>

                            <ComboBoxItem 
                                Content="Проценты"                           
                             />

                            <ComboBoxItem 
                                Content="Фактическое?"
                            />

                        </ComboBox.Items>

                    </ComboBox>

                </Grid>


                <Grid
                    Grid.Row="13"
                    >

                    <Grid.RowDefinitions>

                        <RowDefinition/>

                        <RowDefinition/>

                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>

                        <ColumnDefinition 
                            Width="104.363"
                        />

                        <ColumnDefinition 
                            Width="30"
                        />

                        <ColumnDefinition 
                            Width="*"
                            MaxWidth="120" 
                        />

                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Grid.Row="0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Text="Тип выгрузки"
                        TextWrapping="Wrap"
                        TextAlignment="Center"
                    />

                    <ComboBox 
                        Grid.Row="1"
                        SelectedIndex="1"
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        >


                        <ComboBox.Items>

                            <ComboBoxItem Content="XML"/>

                            <ComboBoxItem Content="JSON"/>


                        </ComboBox.Items>

                    </ComboBox>

                    <Button
                        Grid.Column="1"
                        Grid.RowSpan="2"
                           
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        >

                        <Button.Style>

                            <Style 
                                BasedOn="{StaticResource MahApps.Styles.Button.Circle}"
                                TargetType="{x:Type ButtonBase}"
                                >

                                <Setter 
                                    Property="Foreground" 
                                    Value="{DynamicResource MahApps.Brushes.Accent}" 
                                />

                                <Style.Triggers>

                                    <Trigger 
                                        Property="IsMouseOver"
                                        Value="True"
                                        >
                                        <Setter 
                                            Property="BorderBrush" 
                                            Value="{DynamicResource MahApps.Brushes.Accent}" 
                                        />

                                    </Trigger>

                                </Style.Triggers>

                            </Style>

                        </Button.Style>

                        <iconPacks:PackIconEntypo
                           

                            Kind="HelpWithCircle"
                            Grid.Column="1"
                            >

                            <iconPacks:PackIconEntypo.Foreground>

                                <SolidColorBrush 
                                    Opacity="0.9"
                                    >
                                    <SolidColorBrush.Color>

                                        <Color 
                                            A="255" 
                                            R="105" 
                                            G="125"
                                            B="170"
                                        />

                                    </SolidColorBrush.Color>

                                </SolidColorBrush>

                            </iconPacks:PackIconEntypo.Foreground>

                        </iconPacks:PackIconEntypo>

                    </Button>

                    <Button
                        Margin="0 5 0 5"
                        Grid.Column="2"
                        Grid.RowSpan="2"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        >



                        <TextBlock
                            TextTrimming="WordEllipsis"
                            Margin="0 -3 0 0"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            TextAlignment="Center"
                            TextWrapping="Wrap"
                            Text="Выгрузить" 
                            Opacity="0.6"
                            FontSize="12" 
                        >
                            <TextBlock.LayoutTransform>
                                <TransformGroup>
                                    <ScaleTransform ScaleX="1.25" ScaleY="1.25"/>
                                    <SkewTransform/>
                                    <RotateTransform/>
                                    <TranslateTransform/>
                                </TransformGroup>
                            </TextBlock.LayoutTransform>
                        </TextBlock>




                    </Button>

                </Grid>

            </Grid>



        </Grid>

        <ScrollViewer
            x:Name="ScrollViewerData"
            Grid.Column="1"
            Grid.ColumnSpan="3"
            Grid.RowSpan="2"
            Grid.Row="1"                      
            >

            <ScrollViewer.Style>

                <Style 
                    BasedOn="{StaticResource MahApps.Styles.ScrollViewer}" 
                    TargetType="ScrollViewer"
                    >

                    <Setter 
                        Property="Template"
                        >

                        <Setter.Value>

                            <ControlTemplate 
                                TargetType="{x:Type ScrollViewer}"
                                >

                                <Grid 
                                    Name="Grid" 
                                    Background="{TemplateBinding Background}"
                                    >

                                    <Grid.ColumnDefinitions>

                                        <ColumnDefinition 
                                            Name="leftColumn" 
                                            Width="*" 
                                        />

                                        <ColumnDefinition 
                                            Name="rightColumn" 
                                            Width="30"                                            
                                        />

                                    </Grid.ColumnDefinitions>

                                    <Grid.RowDefinitions>

                                        <RowDefinition 
                                            Height="*" 
                                        />

                                        <RowDefinition 
                                            Height="Auto" 
                                        />

                                    </Grid.RowDefinitions>

                                    <ScrollContentPresenter 
                                        Name="PART_ScrollContentPresenter" 
                                        Grid.Row="0" 
                                        Grid.Column="0" 
                                        Margin="{TemplateBinding Padding}"
                                        CanContentScroll="{TemplateBinding CanContentScroll}" 
                                        CanHorizontallyScroll="False" CanVerticallyScroll="False" 
                                        Content="{TemplateBinding Content}" 
                                        ContentTemplate="{TemplateBinding ContentTemplate}" 
                                    />

                                    <ScrollBar  
                                        Name="PART_VerticalScrollBar"
                                        Grid.Row="0" 
                                        Grid.Column="1" 
                                        Cursor="Arrow" 
                                        Maximum="{TemplateBinding ScrollableHeight}" 
                                        Minimum="0" 
                                        ViewportSize="{TemplateBinding ViewportHeight}"
                                        Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                        Value="{Binding VerticalOffset , Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                        Margin="0 21.9 0 0"
                                        >

                                    </ScrollBar>

                                    <ScrollBar 
                                        Name="PART_HorizontalScrollBar" 
                                        Grid.Row="1" 
                                        Grid.Column="0" 
                                        Cursor="Arrow" 
                                        Maximum="{TemplateBinding ScrollableWidth}" 
                                        Minimum="0" Orientation="Horizontal"
                                        ViewportSize="{TemplateBinding ViewportWidth}" 
                                        Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" 
                                        Value="{Binding HorizontalOffset , Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                    />

                                </Grid>

                            </ControlTemplate>

                        </Setter.Value>

                    </Setter>

                    <Setter 
                        Property="mah:ScrollViewerHelper.VerticalScrollBarOnLeftSide" 
                        Value="False" 
                    />

                </Style>

            </ScrollViewer.Style>

            <DataGrid 
                ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle0000}"
                Grid.RowSpan="2"
                Grid.Column="2"
                Grid.ColumnSpan="1"
                Grid.Row="1"     
                x:Name="Data"
                IsReadOnly="True"
                HeadersVisibility="Column"
                Background="Transparent"
                AutoGenerateColumns="False"
                mah:ControlsHelper.ContentCharacterCasing="Normal"
                CanUserResizeColumns="True"
                CanUserResizeRows ="True"
                HorizontalScrollBarVisibility="Disabled"
                GridLinesVisibility="None"
                SelectionMode="Extended"
                SelectionUnit="FullRow" 
                mah:DataGridHelper.ColumnHeaderPadding="5,0,0,0" 
                HorizontalAlignment="Stretch"                                     
                EnableRowVirtualization="True"                  
                ScrollViewer.CanContentScroll="True"
                               
                Mouse.PreviewMouseWheel="OtherPreviewMouseWheel"
                ItemsSource="{Binding DataObjects}"
                >




                <DataGrid.Resources>

                    <Style 
                        BasedOn="{mah:StaticResource MahApps.Styles.ScrollBar}" 
                        TargetType="ScrollBar">

                        <Setter 
                            Property="Margin" 
                            Value="-20 0 0 0"
                        />

                    </Style>

                </DataGrid.Resources>

                <DataGrid.CellStyle>

                    <Style 
                        TargetType="{x:Type DataGridCell}" 
                        >

                        <EventSetter 
                            Event="PreviewMouseLeftButtonDown" 
                            Handler="DataGridCell_PreviewMouseLeftButtonDown" 
                            >

                        </EventSetter>

                        <Style.Triggers>

                            <Trigger 
                                Property="IsSelected" 
                                Value="True"
                                >

                                <Setter 
                                    Property="Background"
                                    >

                                    <Setter.Value>

                                        <SolidColorBrush>

                                            <SolidColorBrush.Color>

                                                <Color 
                                                    A="100" 
                                                    R="96"
                                                    G="84" 
                                                    B="175"
                                                />

                                            </SolidColorBrush.Color>

                                        </SolidColorBrush>

                                    </Setter.Value>

                                </Setter>

                            </Trigger>

                        </Style.Triggers>

                    </Style>

                </DataGrid.CellStyle>





                <DataGrid.AlternatingRowBackground>

                    <SolidColorBrush>

                        <SolidColorBrush.Color>

                            <Color 
                                A="220" 
                                R="31" 
                                G="31" 
                                B="31"
                            />

                        </SolidColorBrush.Color>

                    </SolidColorBrush>

                </DataGrid.AlternatingRowBackground>

                <DataGrid.RowBackground>

                    <SolidColorBrush >

                        <SolidColorBrush.Color>

                            <Color 
                                A="220" 
                                R="26" 
                                G="26" 
                                B="26"
                            />

                        </SolidColorBrush.Color>

                    </SolidColorBrush>

                </DataGrid.RowBackground>


                <DataGrid.Columns >

                    <DataGridTemplateColumn 
                        IsReadOnly="True"
                        Width="SizetoHeader"
                        Header="Моненты"                            
                        DisplayIndex="0"
                        >

                        <DataGridTemplateColumn.CellTemplate>

                            <DataTemplate>

                                <UniformGrid 
                                    VerticalAlignment="Center"
                                    >

                                    <TextBlock
                                        VerticalAlignment="Stretch" 
                                        HorizontalAlignment="Stretch"
                                        TextAlignment="Left"                                     
                                        Text="{Binding CurrencyObject.Symbol}"                                        
                                    />

                                </UniformGrid>

                            </DataTemplate>

                        </DataGridTemplateColumn.CellTemplate>

                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn 
                            Header="Цена"
                            DisplayIndex="1"
                            Width="SizetoHeader"
                            >

                        <DataGridTemplateColumn.CellTemplate>

                            <DataTemplate>

                                <TextBlock 
                                        VerticalAlignment="Center" 
                                        HorizontalAlignment="Left"
                                        Text="{Binding CurrencyObject.Price}"
                                />

                            </DataTemplate>

                        </DataGridTemplateColumn.CellTemplate>

                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn 
                        DisplayIndex="3"
                        Width="SizetoHeader"
                        Header="Локальное время"
                        >

                        <DataGridTemplateColumn.CellTemplate>

                            <DataTemplate>

                                <TextBlock 
                                    VerticalAlignment="Center" 
                                    HorizontalAlignment="Left"
                                    Text="{Binding CurrencyObject.LocalTime, StringFormat=dd/MM/yyyy HH:mm:ss, ConverterCulture = ru-RU}"                                        
                                />

                            </DataTemplate>

                        </DataGridTemplateColumn.CellTemplate>

                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn 
                        DisplayIndex="2"
                        Width="170"
                        Header="Объёмы"
                        >

                        <DataGridTemplateColumn.CellTemplate>

                            <DataTemplate >

                                <ComboBox 
                                    Background="Transparent"  
                                    ItemsSource="{Binding DataVolume}"
                                    IsHitTestVisible="True"
                                    >

                                    <ComboBox.BindingGroup>

                                        <BindingGroup 
                                            Name="ComboBoxGroup"
                                        />

                                    </ComboBox.BindingGroup>

                                    <ComboBox.Style>
                                        <Style 
                                            BasedOn="{mah:StaticResource MahApps.Styles.ComboBox}"
                                            TargetType="{x:Type ComboBox}">

                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type ComboBox}">

                                                        <Grid>

                                                            <Border Name="Border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                            <Grid Margin="{TemplateBinding BorderThickness}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Name="TextColumn" Width="*" />
                                                                    <ColumnDefinition Name="ButtonColumn" Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(mah:TextBoxHelper.ButtonWidth), Mode=OneWay}" />
                                                                    <ColumnDefinition Name="ToggleButtonColumn" Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(mah:TextBoxHelper.ButtonWidth), Mode=OneWay}" />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Name="ButtonRow" Height="*" />
                                                                </Grid.RowDefinitions>
                                                                <ToggleButton Name="PART_DropDownToggle" Grid.RowSpan="2" Grid.ColumnSpan="3" Margin="0" VerticalAlignment="Stretch"  Background="Transparent" BorderThickness="0" Foreground="{TemplateBinding Foreground}" IsTabStop="False" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Style="{DynamicResource MahApps.Styles.ToggleButton.ComboBoxDropDown}" IsChecked="{Binding IsDropDownOpen , Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                                                <Grid Name="ContentSite" Grid.Row="1" Grid.Column="0" Margin="1 0">
                                                                    <ContentPresenter Margin="{TemplateBinding Padding}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" IsHitTestVisible="False" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                </Grid>
                                                                <TextBox Name="PART_EditableTextBox" Grid.Row="1" Grid.Column="0" Margin="0" Padding="{TemplateBinding Padding}" HorizontalAlignment="Stretch" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"   BorderThickness="0" Focusable="True" FontFamily="{TemplateBinding FontFamily}" FontSize="{TemplateBinding FontSize}" Foreground="{TemplateBinding Foreground}" IsReadOnly="{TemplateBinding IsReadOnly}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Style="{StaticResource MahApps.Styles.TextBox.ComboBox.Editable}" Visibility="Collapsed" Background="{x:Null}" CharacterCasing="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(mah:ComboBoxHelper.CharacterCasing), Mode=OneWay}" MaxLength="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(mah:ComboBoxHelper.MaxLength), Mode=OneWay}" />
                                                                <TextBlock Name="PART_Message" Grid.Row="1" Grid.Column="0" Margin="4 0" Padding="{TemplateBinding Padding}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Foreground="{TemplateBinding Foreground}" Style="{DynamicResource MahApps.Styles.TextBlock.Watermark}"  Visibility="Collapsed" />
                                                                <ContentControl Name="PART_FloatingMessageContainer" Grid.Row="0" Grid.Column="0" Margin="4 0" Style="{DynamicResource MahApps.Styles.ContentControl.FloatingMessageContainer}">
                                                                    <ContentControl.Height>
                                                                        <MultiBinding Converter="{converters:MathMultiplyConverter}">
                                                                            <Binding ElementName="PART_FloatingMessage" Mode="OneWay" Path="ActualHeight" />
                                                                            <Binding ElementName="PART_FloatingMessageContainer" Mode="OneWay" Path="Opacity" />
                                                                        </MultiBinding>
                                                                    </ContentControl.Height>
                                                                    <TextBlock Name="PART_FloatingMessage" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Foreground="{TemplateBinding Foreground}" Style="{DynamicResource MahApps.Styles.TextBlock.AutoCollapsing}">
                                                                        <TextBlock.RenderTransform>
                                                                            <TranslateTransform x:Name="FloatingMessageTransform">
                                                                                <TranslateTransform.Y>
                                                                                    <MultiBinding Converter="{converters:MathSubtractConverter}">
                                                                                        <Binding ElementName="PART_FloatingMessage" Mode="OneWay" Path="ActualHeight" />
                                                                                        <Binding ElementName="PART_FloatingMessageContainer" Mode="OneWay" Path="ActualHeight" />
                                                                                    </MultiBinding>
                                                                                </TranslateTransform.Y>
                                                                            </TranslateTransform>
                                                                        </TextBlock.RenderTransform>
                                                                    </TextBlock>
                                                                </ContentControl>
                                                            </Grid>
                                                            <Border Name="DisabledVisualElement" Grid.ColumnSpan="3" Background="{DynamicResource MahApps.Brushes.Control.Disabled}" BorderBrush="{DynamicResource MahApps.Brushes.Control.Disabled}" BorderThickness="{TemplateBinding BorderThickness}" IsHitTestVisible="False" Opacity="0.6" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Visibility="Collapsed" />
                                                            <Popup Name="PART_Popup" AllowsTransparency="True" Focusable="False" Placement="Bottom" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" IsOpen="{Binding IsDropDownOpen , RelativeSource={RelativeSource TemplatedParent}}">
                                                                <Grid MinWidth="{Binding ActualWidth , RelativeSource={RelativeSource TemplatedParent}}" MaxHeight="{Binding MaxDropDownHeight , RelativeSource={RelativeSource TemplatedParent}}">
                                                                    <Border Name="PopupBorder" Height="Auto" HorizontalAlignment="Stretch" Background="{DynamicResource MahApps.Brushes.ThemeBackground}" BorderBrush="{DynamicResource MahApps.Brushes.ComboBox.PopupBorder}" BorderThickness="{DynamicResource ComboBoxPopupBorderThemeThickness}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                                                                        <ScrollViewer Padding="{DynamicResource ComboBoxPopupBorderThemePadding}" BorderThickness="0">
                                                                            <Grid>
                                                                                <Grid.ColumnDefinitions>
                                                                                    <ColumnDefinition Width="*"/>
                                                                                </Grid.ColumnDefinitions>
                                                                                <Grid.RowDefinitions>
                                                                                    <RowDefinition/>
                                                                                    <RowDefinition/>
                                                                                </Grid.RowDefinitions>
                                                                                <ComboBox  
                                                                                    Grid.Row="0"
                                                                                    ItemsSource="{Binding DataVolume}"
                                                                                    >
                                                                                    <!--<ComboBox.Items>
                                                                                        <ComboBoxItem HorizontalAlignment="Center">=Test Test1</ComboBoxItem>
                                                                                        <ComboBoxItem HorizontalAlignment="Center">=Test Test2</ComboBoxItem>
                                                                                        <ComboBoxItem HorizontalAlignment="Center">=Test Test3</ComboBoxItem>
                                                                                        <ComboBoxItem HorizontalAlignment="Center">=Test Test4</ComboBoxItem>
                                                                                        <ComboBoxItem HorizontalAlignment="Center">=Test Test5</ComboBoxItem>
                                                                                    </ComboBox.Items>-->
                                                                                    
                                                                                    <ComboBox.ItemTemplate>
                                                                                        
                                                                                        <DataTemplate>

                                                                                            <Grid 
                                                                                                Background="Transparent"
                                                                                                >

                                                                                                <Grid.ColumnDefinitions>

                                                                                                    <ColumnDefinition 
                                                                                                        Width="auto" 
                                                                                                    />

                                                                                                    <ColumnDefinition 
                                                                                                        Width="auto"
                                                                                                    />

                                                                                                    <ColumnDefinition 
                                                                                                        Width="auto"
                                                                                                    />

                                                                                                </Grid.ColumnDefinitions>

                                                                                                <TextBlock 
                                                                                                    Grid.Column="0" 
                                                                                                    Margin="5"
                                                                                                    Text="{Binding Volume}"
                                                                                                />

                                                                                                <TextBlock 
                                                                                                    Grid.Column="1" 
                                                                                                    Margin="5" 
                                                                                                    Text="x"
                                                                                                />

                                                                                                <TextBlock 
                                                                                                    Margin="5" 
                                                                                                    Grid.Column="2" 
                                                                                                    Text="{Binding Result,StringFormat=C2}"
                                                                                                />

                                                                                            </Grid>

                                                                                         </DataTemplate>

                                                                                    </ComboBox.ItemTemplate>
                                                                                    
                                                                                    <ComboBox.Style>
                                                                                        <Style 
                                                                                            BasedOn="{mah:StaticResource MahApps.Styles.ComboBox}" 
                                                                                            TargetType="ComboBox">
                                                                                            <Style.Setters>
                                                                                                <Setter Property="Template" >
                                                                                                    <Setter.Value>
                                                                                                        <ControlTemplate>
                                                                                                            <Grid>
                                                                                                                
                                                                                                                <Grid.RowDefinitions>
                                                                                                                    <RowDefinition/>
                                                                                                                    <RowDefinition/>
                                                                                                                </Grid.RowDefinitions>
                                                                                                                
                                                                                                                <Border
                                                                                                                    Opacity="0.25"
                                                                                                                    BorderBrush="GreenYellow" 
                                                                                                                    BorderThickness="3"
                                                                                                                    
                                                                                                                />
                                                                                                                
                                                                                                                <ItemsPresenter Margin="10" Grid.Row="0"/>
                                                                                                                
                                                                                                            <Separator Grid.Row="1"/>
                                                                                                            </Grid>
                                                                                                        </ControlTemplate>
                                                                                                    </Setter.Value>
                                                                                                </Setter>
                                                                                            </Style.Setters>
                                                                                        </Style>
                                                                                    </ComboBox.Style>
                                                                                </ComboBox>
                                                                                <ItemsPresenter Grid.Row="1" />
                                                                            </Grid>
                                                                        </ScrollViewer>
                                                                    </Border>
                                                                </Grid>
                                                            </Popup>
                                                        </Grid>
                                                    </ControlTemplate>

                                                </Setter.Value>

                                            </Setter>

                                            <Setter Property="IsDropDownOpen" Value="False"/>


                                        </Style>
                                    </ComboBox.Style>


                                    <ComboBox.ItemTemplate>

                                        <DataTemplate>

                                            <Grid 
                                                Background="Transparent"
                                                >

                                                <Grid.ColumnDefinitions>

                                                    <ColumnDefinition 
                                                        Width="auto" 
                                                    />

                                                    <ColumnDefinition 
                                                        Width="auto"
                                                    />

                                                    <ColumnDefinition 
                                                        Width="auto"
                                                    />

                                                </Grid.ColumnDefinitions>

                                                <TextBlock 
                                                    Grid.Column="0" 
                                                    Margin="5"
                                                    Text="{Binding Volume}"
                                                />

                                                <TextBlock 
                                                    Grid.Column="1" 
                                                    Margin="5" 
                                                    Text="x"
                                                />

                                                <TextBlock 
                                                    Margin="5" 
                                                    Grid.Column="2" 
                                                    Text="{Binding Result,StringFormat=C2}"
                                                />

                                            </Grid>

                                        </DataTemplate>

                                    </ComboBox.ItemTemplate>

                                </ComboBox>

                            </DataTemplate>

                        </DataGridTemplateColumn.CellTemplate>

                    </DataGridTemplateColumn>

                </DataGrid.Columns>

                <DataGrid.RowHeaderTemplate>

                    <ItemContainerTemplate>

                        <Grid>

                            <Grid.RowDefinitions>

                                <RowDefinition 
                                    Height="*"
                                />

                            </Grid.RowDefinitions>

                            <Button 
                                Width="30"
                                Height="40"
                                Grid.Row="0" 
                                Padding="0"
                                FontSize="30"
                                Content="⬇"
                            />

                        </Grid>

                    </ItemContainerTemplate>

                </DataGrid.RowHeaderTemplate>

            </DataGrid>

        </ScrollViewer>

    </Grid>

</mah:MetroWindow>
